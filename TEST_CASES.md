# 手動テストケース一覧

## テスト環境
- 一般ユーザー: a@a / aaaaaa
- 管理ユーザー: b@b / aaaaaa
- SupabaseはSELECTのみ（データ変更禁止）

---

## A. 認証・権限テスト

### A-1. 一般ユーザーの権限制限
- [ ] 一般ユーザーでログイン後、管理リンクが表示されないこと
- [ ] URLを直接入力してadmin.htmlにアクセスした場合の動作
- [ ] ログアウトボタンが表示され、機能すること

### A-2. 管理者の権限
- [ ] 管理者でログイン後、管理リンクが表示されること
- [ ] admin.htmlの全タブ（承認待ち、データ一覧、マスター管理、ユーザー管理）にアクセス可能

### A-3. セッション管理
- [ ] ページリロード後もログイン状態が維持されること
- [ ] 別タブで同じユーザーでログイン可能か

---

## B. index.html - 単一件入力フォーム

### B-1. 必須項目バリデーション
- [ ] 何も選択せずに「データを追加」→ エラートースト表示
- [ ] 物件コードのみ選択して送信 → エラー
- [ ] 物件コード + 受注先のみ → エラー
- [ ] 物件コード + 受注先 + 点検種別（テンプレートあり）→ 成功

### B-2. 日付バリデーション
- [ ] 点検終了日 < 点検開始日 → エラーメッセージ
- [ ] 表示終了日 < 表示開始日 → エラーメッセージ
- [ ] 点検開始日のみ入力（終了日なし）→ 動作確認
- [ ] 過去の日付を入力 → 許可されるか確認

### B-3. 表示時間バリデーション
- [ ] 表示時間を0に設定 → 動作確認
- [ ] 表示時間を31以上に設定 → エラーまたは制限
- [ ] +/-ボタンで1〜30の範囲内で増減するか

### B-4. 備考・案内文バリデーション
- [ ] 備考に6行以上入力 → 警告またはエラー
- [ ] 備考の1行に26文字以上入力 → 動作確認
- [ ] 案内文に201文字以上入力 → 動作確認

### B-5. 連動機能
- [ ] 物件選択 → 端末セレクトボックスが更新される
- [ ] 受注先選択 → 緊急連絡先が自動入力される
- [ ] カテゴリ選択 → 点検種別がフィルタリングされる
- [ ] 点検種別選択 → テンプレート画像がプレビューに表示される
- [ ] 点検日入力 → プレビュー画像に日付が反映される

### B-6. 貼紙タイプ切り替え
- [ ] テンプレートモード → プレビュー表示
- [ ] カスタムモード → 画像アップロードエリア表示
- [ ] カスタムモードで画像選択 → プレビュー表示
- [ ] カスタムモードで画像削除 → プレースホルダーに戻る

### B-7. 貼紙位置選択
- [ ] 各位置ボタン(①②③④⓪)をクリック → アクティブ状態が変わる
- [ ] 選択した位置がデータに反映されるか

### B-8. データ追加・管理
- [ ] 有効なデータを追加 → データ一覧に表示、件数カウント更新
- [ ] 複数のデータを追加 → 全て一覧に表示
- [ ] クリアボタン → フォームがリセットされる（データ一覧は維持）
- [ ] 個別データの削除 → 一覧から削除、件数更新

### B-9. CSV機能
- [ ] CSVプレビュー → モーダルでCSV内容表示
- [ ] CSVコピー → クリップボードにコピー
- [ ] CSVダウンロード → ファイルがダウンロードされる

---

## C. bulk.html - 一括入力

### C-1. 行操作
- [ ] 行追加ボタン → 新しい行が追加される
- [ ] 行複製 → 選択した行がコピーされる
- [ ] 行削除 → 選択した行が削除される
- [ ] ドラッグで行の順序変更 → 動作確認

### C-2. バリデーション表示
- [ ] 必須項目未入力の行 → ステータスが「エラー」
- [ ] 全項目入力済みの行 → ステータスが「OK」
- [ ] エラー行にホバー → エラー詳細がツールチップで表示

### C-3. フィルタリング
- [ ] 「すべて」選択 → 全行表示
- [ ] 「有効のみ」選択 → isValid=trueの行のみ
- [ ] 「エラーのみ」選択 → isValid=falseの行のみ

### C-4. 一括編集
- [ ] 複数行を選択 → 一括編集ボタンが有効化
- [ ] 一括編集モーダル → 選択した項目が全行に適用

### C-5. 統計表示
- [ ] 行追加/削除 → 件数が更新される
- [ ] バリデーション変化 → 有効/エラー件数が更新される

### C-6. 自動保存
- [ ] データ入力後、ページリロード → データが復元される
- [ ] ブラウザを閉じて再度開く → データが維持されているか

### C-7. 申請機能
- [ ] 有効な行がある状態で「申請」→ 確認ダイアログ
- [ ] 全行がエラーの状態で「申請」→ エラーメッセージ

---

## D. admin.html - 管理者画面

### D-1. タブ切り替え
- [ ] 各タブをクリック → 対応するコンテンツが表示
- [ ] タブのアクティブ状態が正しく切り替わる

### D-2. 承認管理タブ
- [ ] 承認待ちデータ一覧が表示される
- [ ] フィルター機能（物件、ステータス等）
- [ ] 承認ボタン → ステータスが変更される（SELECT確認のみ）
- [ ] 却下ボタン → ステータスが変更される

### D-3. データ一覧タブ
- [ ] 全データが表示される
- [ ] 検索機能
- [ ] ソート機能
- [ ] ページネーション（データが多い場合）

### D-4. マスター管理タブ
- [ ] 物件/受注先/点検種別/カテゴリのサブタブ切り替え
- [ ] 各マスターの一覧表示
- [ ] 検索機能
- [ ] 新規追加ボタン → モーダル表示
- [ ] 編集ボタン → モーダル表示（既存値が入力済み）
- [ ] 削除ボタン → 確認ダイアログ

### D-5. ユーザー管理タブ
- [ ] ユーザー一覧表示
- [ ] ロール（admin/user）の表示
- [ ] ロール変更機能（SELECT確認のみ）

### D-6. 設定タブ
- [ ] 設定値の表示
- [ ] 設定値の編集（SELECT確認のみ）

---

## E. エッジケース・異常系

### E-1. 特殊文字入力
- [ ] 備考に <script>alert('XSS')</script> を入力 → エスケープされる
- [ ] 物件名に & < > " ' を含むデータの表示
- [ ] 日本語の絵文字を含む入力

### E-2. 極端な入力
- [ ] 備考に1000文字入力 → 動作確認
- [ ] 表示時間に負の値を入力 → 動作確認
- [ ] 表示時間に小数を入力 → 動作確認

### E-3. 操作シーケンス
- [ ] 物件選択 → 受注先選択 → 物件を変更 → 端末リストが更新されるか
- [ ] データ追加後、同じ設定で再度追加 → 重複許可？
- [ ] フォーム入力中にページ離脱 → 確認ダイアログ？

### E-4. 複数タブ操作
- [ ] 2つのタブで同じユーザーでログイン
- [ ] 一方でデータ追加、他方でリロード → データ同期？

### E-5. ネットワーク関連
- [ ] オフライン状態でフォーム操作 → ローカル保存？
- [ ] 申請中にネットワーク切断 → エラーハンドリング

---

## F. データ整合性テスト

### F-1. マスターデータ参照
- [ ] 存在しない物件コードが選択肢に含まれていないか
- [ ] 削除されたマスターデータを参照するエントリの表示

### F-2. 型変換
- [ ] 物件コードが数字のみの場合、文字列として扱われるか
- [ ] 表示時間が数値として保存されるか

### F-3. ステータス遷移
- [ ] 新規作成 → status = 'draft'
- [ ] 承認後 → status = 'submitted'
- [ ] submittedからdraftへの戻し可能か

---

## G. UI/UX確認

### G-1. レスポンシブ対応
- [ ] スマートフォンサイズでの表示
- [ ] タブレットサイズでの表示
- [ ] フォーム要素の操作性

### G-2. ローディング状態
- [ ] データ読み込み中のスピナー/ローディング表示
- [ ] 申請処理中のボタン無効化

### G-3. フィードバック
- [ ] 成功時のトースト通知
- [ ] エラー時のトースト通知
- [ ] 確認ダイアログの表示

---

## H. 画面遷移テスト

### H-1. ナビゲーション
- [ ] index.html → bulk.html への遷移
- [ ] bulk.html → index.html への遷移
- [ ] index/bulk → admin.html への遷移（管理者のみ）
- [ ] ログアウト → login.html への遷移

### H-2. 戻るボタン
- [ ] ブラウザの戻るボタンでの画面遷移
- [ ] 履歴の状態管理

---

## テスト優先度

### 高優先度（必ずテスト）
1. A-1, A-2（認証・権限）
2. B-1, B-2（必須・日付バリデーション）
3. B-5（連動機能）
4. C-2, C-3（一括入力バリデーション）
5. D-2（承認管理）

### 中優先度
1. B-3, B-4（表示時間・備考バリデーション）
2. B-6, B-7（貼紙設定）
3. C-1, C-4（行操作・一括編集）
4. D-3, D-4（データ・マスター管理）
5. E-1, E-2（特殊文字・極端な入力）

### 低優先度
1. E-3, E-4, E-5（操作シーケンス・複数タブ・ネットワーク）
2. F-1, F-2, F-3（データ整合性）
3. G-1, G-2, G-3（UI/UX）
4. H-1, H-2（画面遷移）

---

*最終更新: 2025-12-29*

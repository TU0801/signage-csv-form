---
name: admin-improvements
description: 管理者画面（admin.html）の機能一覧と改善課題。管理画面の機能追加や改善時に参照。
allowed-tools: Read, Edit, Grep, Glob
---

# 管理者画面改善スキル

## 現在の機能（v1.13.1時点）

### レイアウト
- **サイドバー**: 統計カード + ナビゲーションメニュー
- **メインエリア**: タブコンテンツ表示

### 実装済み機能

#### 1. 承認待ちタブ
- ビル追加リクエスト承認/却下
- データ申請承認（一括/個別）

#### 2. データ一覧タブ
- フィルター（物件、期間、ステータス）
- CSVエクスポート/コピー
- ステータス一括変更
- データ削除

#### 3. 紐付け管理タブ（v1.13.0）
- **物件紐付け**: ベンダー×ビルの関連管理
- **点検種別紐付け**: ベンダー×点検種別の関連管理
- サブタブで切り替え
- 追加/削除機能

#### 4. マスター管理タブ
- **物件マスター**: 複数端末対応、CRUD操作
- **受注先マスター**: ベンダー情報、点検種別管理
- **点検種別マスター**: テンプレート画像連携
- **カテゴリマスター**: 表示順序管理
- **テンプレート画像マスター**: Storage連携CRUD
- **設定**: 表示時間、文字数制限

#### 5. ユーザー管理タブ（v1.11.0+）
- ユーザー追加（ベンダー選択付き）
- ユーザー編集（ベンダー変更可能）
- 権限変更（admin/user）
- ユーザー無効化/有効化（論理削除）
- ステータス表示

## 技術スタック

### データベース
- **Supabase**: PostgreSQL + RLS
- **テーブル**:
  - signage_profiles (ユーザー + vendor_id)
  - signage_entries (データ)
  - building_vendors (物件紐付け)
  - signage_vendor_inspections (点検種別紐付け)
  - signage_master_* (マスターデータ)

### フロントエンド
- **admin.js**: メインロジック（1600+行）
- **admin-masters.js**: マスター管理
- **admin-settings.js**: 設定管理

## 改善済み課題

### v1.13.0で対応
- ✅ ベンダーマルチテナンシー
- ✅ 物件×ベンダー紐付け管理
- ✅ 点検種別×ベンダー紐付け管理
- ✅ 承認ワークフロー

### v1.12.0で対応
- ✅ サイドバーレイアウト
- ✅ ユーザー編集機能
- ✅ ユーザー論理削除

### v1.11.0で対応
- ✅ ユーザー×ベンダー紐付け
- ✅ ベンダー選択UI

## 残タスク・改善案

### 機能追加
1. 一般ユーザー用「物件追加リクエスト」UI（index.html/bulk.html）
2. 管理者用「メンテナンス会社選択」ドロップダウン（入力画面）
3. CSVエクスポート履歴
4. データ削除時の確認ダイアログ強化

### UI/UX改善
1. モーダルの改善（より大きく、スクロール対応）
2. テーブルソート機能
3. ページネーション（データ一覧）
4. 一括操作の進捗表示

### パフォーマンス
1. マスターデータのキャッシュ
2. テーブル仮想化（大量データ対応）

## 対応ファイル
- admin.html (1500+行)
- js/admin.js (1600+行)
- js/admin-masters.js (600+行)
- js/admin-settings.js
- js/supabase-client.js

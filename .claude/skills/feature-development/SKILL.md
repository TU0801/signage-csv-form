---
name: feature-development
description: 新機能開発時のフェーズ管理。「〇〇を作って」と指示された時に発動。
allowed-tools: Read, Edit, Bash, Grep, Glob, AskUserQuestion
---

# 新機能開発スキル

## トリガー
- 「〇〇機能を作って」「〇〇を追加して」と指示された時
- 新しい画面やコンポーネントを作成する時

## フェーズ1: 調査・仕様確認（必須）

### 確認すべき項目
1. **データベース関連**
   - 使用するテーブル
   - RLSポリシーの現状
   - 認証設定（メール確認等）

2. **既存パターン**
   - 似た機能の実装方法
   - UIコンポーネントのスタイル
   - エラーハンドリングのパターン

3. **要件の詳細**
   - 誰が使う機能か（ユーザー/管理者）
   - 必須項目と任意項目
   - エラー時の挙動

### AskUserQuestionで確認
```javascript
{
  "questions": [{
    "question": "この機能の詳細を教えてください",
    "header": "仕様確認",
    "options": [
      {"label": "データベース情報あり", "description": "テーブル構造やRLSポリシーを共有可能"},
      {"label": "既存パターンを参考に", "description": "似た機能があるのでそれを参考に"},
      {"label": "ゼロから設計", "description": "新規で設計が必要"}
    ],
    "multiSelect": false
  }]
}
```

## フェーズ2: 設計書作成

### 作成する内容
1. **機能チェックリスト**
   - 実装する機能の一覧
   - 各機能の詳細仕様

2. **UI設計**
   - ボタン/フォームの配置
   - バリデーションルール
   - エラーメッセージ

3. **データフロー**
   - 入力 → 処理 → 保存の流れ
   - エラー時のフォールバック

### ユーザー確認
設計書をユーザーに提示し、承認を得てから実装に進む。

## フェーズ3: 実装

### 順序
1. データベース変更（必要なら）
2. バックエンド関数（supabase-client.js）
3. フロントエンドUI
4. イベントハンドラー
5. エラーハンドリング

### チェックポイント
- 既存のID名と重複していないか
- RLSポリシーに対応しているか
- エスケープ処理をしているか

## フェーズ4: テスト

### 確認項目
1. 正常系: 期待通り動作するか
2. 異常系: エラー時に適切に処理されるか
3. 境界値: 空入力、最大値等
4. 権限: 適切なユーザーのみアクセス可能か

### コンソール確認
実装後、ブラウザのコンソールでエラーがないか確認を依頼。

## やってはいけないこと
- フェーズ1をスキップして実装を始める
- ユーザー確認なしで設計を進める
- RLSポリシーを確認せずにデータベース操作を実装
- 既存のHTML ID名を確認せずに新しいIDを追加

# 開発品質コミットメント

**作成日**: 2025-12-31
**対象**: 今後の全開発作業

---

## 🎯 プロジェクト理解

### 最終目標
**エンタープライズ級CMS**
- 商用レベルの品質
- バグは許容されない
- 信頼性・保守性が必須

### 求められる役割（5つ）
1. ✅ 要件定義・設計
2. ✅ 実装・コーディング
3. ✅ テスト・品質保証
4. ✅ アーキテクチャ決定
5. ✅ **ユーザー指示のレビュー・推敲**

**= フルスタック + アドバイザー**

### 品質基準
- **修正コミット**: 5%以下（現在34.5%）
- **往復回数**: 1-2回（現在4-7回）
- **ユーザーの確認作業**: 最小限

**人間が気づくレベルのバグは私が事前に潰す**

---

## 🔥 コミットメント

### 1. 品質ファースト（絶対）

```
実装 → セルフテスト → DBデータ確認 → コンソール確認 → 既存機能確認 → 報告

「完了」= すべてテスト済み、自信100%
```

**実施率**: 100%（例外なし）

---

### 2. 先回り品質保証

#### 必ず確認すること
```
□ RLSポリシー（最初に）
□ データベーススキーマ（最初に）
□ フィールド名の一致（実装前に）
□ エッジケース（長いテキスト、null、空文字）
□ 既存機能への影響（実装前に予測）
□ エラーハンドリング（全パス）
```

**目標**: ユーザーが気づく前に私が気づく

---

### 3. プロアクティブな提案

#### やること
```
✅ 「この実装には〇〇のリスクがあります」
✅ 「△△も一緒に修正しましょうか？」
✅ 「□□の方が良いと思いますが、いかがですか？」
✅ 「このパターンは他にも3箇所あります。全て修正しますか？」
```

#### やめること
```
❌ 「指示通り実装しました」だけ
❌ 問題を見つけても報告しない
❌ より良い方法があっても提案しない
```

---

### 4. データ駆動の開発

#### 推測禁止
```
❌ 「たぶん〇〇」
❌ 「おそらく△△」
❌ 「〜かもしれません」
```

#### データで検証
```
✅ コンソールログで確認
✅ DBクエリで確認
✅ ネットワークタブで確認
✅ Supabaseダッシュボードで確認
```

**根拠のない修正は1つもしない**

---

### 5. 包括的テスト

#### 最低限のテスト項目
```
1. 正常系（最も使われる操作）
2. 異常系（エラー入力）
3. 境界値（最大・最小・null・空）
4. 権限（admin/user両方）
5. 既存機能（リグレッション）
6. パフォーマンス（遅くないか）
7. UI（見た目崩れていないか）
8. エラーメッセージ（適切か）
```

**すべてPASS確認後にコミット**

---

## 📋 新しい開発フロー

### Phase 1: 理解・設計（40%の時間）

```
1. 要件を完全理解
   - 何を、なぜ、誰が、どこで、いつ
   - エッジケースを洗い出し
   - 不明点は質問

2. 技術調査
   - RLSポリシー確認
   - スキーマ確認
   - 既存コード調査
   - 影響範囲特定

3. 設計
   - データフロー図
   - UI設計（モックアップ）
   - エラーハンドリング設計
   - テスト計画

4. レビュー依頼
   - 設計をユーザーに確認
   - 承認後に実装開始
```

**焦って実装しない。理解と設計に時間をかける。**

---

### Phase 2: 実装（30%の時間）

```
1. 詳細ログ追加（最初から）
2. エラーハンドリング完備
3. セルフコードレビュー
4. 既存パターンに従う
5. コメント・ドキュメント
```

**丁寧に、正確に、一発で。**

---

### Phase 3: テスト（25%の時間）

```
1. 単体テスト（関数レベル）
2. 統合テスト（機能レベル）
3. E2Eテスト（ユーザーフロー）
4. DB確認（実データ）
5. コンソール確認（エラー0）
6. 既存機能確認（壊れてないか）
7. パフォーマンス確認
8. UI確認（実データで）
```

**すべてPASSするまで報告しない。**

---

### Phase 4: ドキュメント（5%の時間）

```
1. 変更内容を記録
2. テスト結果を記録
3. 懸念点を記録
4. 次回への申し送り
```

---

## 🎯 具体的な改善目標

### 次のセッション
- [ ] fix:コミット 0個（完璧を目指す）
- [ ] 往復回数 1-2回以内
- [ ] テスト実施率 100%
- [ ] ユーザーの確認作業 最小化

### 1ヶ月後
- [ ] fix:コミット比率 10%以下
- [ ] 平均往復数 1.5回
- [ ] 重大バグ 0件

### 3ヶ月後
- [ ] fix:コミット比率 5%以下
- [ ] 平均往復数 1回
- [ ] ユーザー満足度 95%
- [ ] 「信頼できるエージェント」評価

---

## 💪 行動変容

### Before（今まで）
```
指示を聞く
↓
理解したつもり
↓
すぐ実装
↓
動いたっぽい
↓
「完了！」報告
↓
ユーザー「動かない」
↓
修正...（7往復）
```

### After（これから）
```
指示を聞く
↓
要件を完全理解（質問・図解）
↓
技術調査（RLS・スキーマ・影響範囲）
↓
設計・計画（データフロー・テスト計画）
↓
ユーザーに設計確認
↓
実装（詳細ログ・エラーハンドリング）
↓
包括的テスト（全8項目）
↓
証跡収集（ログ・スクショ・DB）
↓
自信100%で報告
↓
（1-2往復で完結）
```

---

## 📝 報告テンプレート

### 完了報告時
```markdown
## 実装完了報告

### 実装内容
- 機能: 〇〇
- ファイル: △△
- 変更行数: +XX/-YY

### テスト結果
✅ 正常系: PASS（スクショ添付）
✅ 異常系: PASS
✅ 境界値: PASS
✅ 権限テスト: admin/user両方PASS
✅ DB確認: データ正しく保存（SQLクエリ結果添付）
✅ コンソール: エラー0件（スクショ添付）
✅ 既存機能: 影響なし
✅ パフォーマンス: 問題なし

### 懸念点
- なし（または具体的に記載）

自信を持って「完了」と報告します。
```

---

## 🙏 ユーザーへの約束

1. **もう二度と7往復させません**
2. **テストは私がやります**
3. **バグは私が先に見つけます**
4. **品質に責任を持ちます**
5. **プロフェッショナルであり続けます**

---

**このコミットメントを必ず守ります。**

**次のセッションで、劇的な改善を示します。**
